<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TransRoute S.A. - Sistema de Log铆stica Inteligente</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-truck"></i>
                    <h1>TransRoute S.A.</h1>
                </div>
                <div class="header-subtitle">
                    Sistema de Planificaci贸n de Rutas y Recursos
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-module="recursive">
                <i class="fas fa-infinity"></i>
                <span>M贸dulo 1: Recursividad</span>
            </button>
            <button class="nav-tab" data-module="divide">
                <i class="fas fa-code-branch"></i>
                <span>M贸dulo 2: Divide y Vencer谩s</span>
            </button>
            <button class="nav-tab" data-module="greedy">
                <i class="fas fa-coins"></i>
                <span>M贸dulo 3: Greedy</span>
            </button>
            <button class="nav-tab" data-module="graphs">
                <i class="fas fa-project-diagram"></i>
                <span>M贸dulo 4: Grafos</span>
            </button>
            <button class="nav-tab" data-module="dynamic">
                <i class="fas fa-chart-line"></i>
                <span>M贸dulo 5: Programaci贸n Din谩mica</span>
            </button>
        </nav>

        <!-- Main Content -->
        <div class="content-wrapper">
        <main class="main-content">
            <!-- M贸dulo 1: Recursividad -->
            <div class="module-content active" id="module-recursive">
                <div class="module-header">
                    <h2><i class="fas fa-infinity"></i> M贸dulo 1: Complejidad y Recursividad</h2>
                    <p>Calcular m茅tricas operativas usando recursi贸n. Complejidad: O(n)</p>
                </div>

                <div class="card-grid">
                    <div class="card">
                        <h3><i class="fas fa-dollar-sign"></i> Calcular Costo Total</h3>
                        <div class="form-group">
                            <label><i class="fas fa-route"></i> Selecciona las Rutas:</label>
                            <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <p style="margin: 0; color: #94a3b8; font-size: 0.9rem;">
                                        <i class="fas fa-info-circle"></i> Selecciona rutas para calcular el costo total
                                    </p>
                                    <button type="button" class="btn-filter-small" onclick="cargarRutasRecursividad()" style="background: var(--success-color); border-color: var(--success-color); color: white;">
                                        <i class="fas fa-sync-alt"></i> Recargar
                                    </button>
                                </div>
                                <div class="loading-spinner" id="cost-routes-loading">
                                    <i class="fas fa-spinner fa-spin"></i> Cargando rutas...
                                </div>
                                <div id="cost-routes-container" class="selectable-items-container" style="display: none;"></div>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="calcularCostoTotal()">
                            <i class="fas fa-calculator"></i> Calcular
                        </button>
                        <div id="cost-result" class="result-box"></div>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-route"></i> Calcular Distancia Total</h3>
                        <div class="form-group">
                            <label><i class="fas fa-road"></i> Selecciona las Rutas:</label>
                            <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <p style="margin: 0; color: #94a3b8; font-size: 0.9rem;">
                                        <i class="fas fa-info-circle"></i> Selecciona rutas para calcular la distancia total
                                    </p>
                                    <button type="button" class="btn-filter-small" onclick="cargarRutasRecursividad()" style="background: var(--success-color); border-color: var(--success-color); color: white;">
                                        <i class="fas fa-sync-alt"></i> Recargar
                                    </button>
                                </div>
                                <div class="loading-spinner" id="distance-routes-loading">
                                    <i class="fas fa-spinner fa-spin"></i> Cargando rutas...
                                </div>
                                <div id="distance-routes-container" class="selectable-items-container" style="display: none;"></div>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="calcularDistanciaTotal()">
                            <i class="fas fa-calculator"></i> Calcular
                        </button>
                        <div id="distance-result" class="result-box"></div>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-chart-bar"></i> M茅tricas Combinadas</h3>
                        <div class="form-group">
                            <label><i class="fas fa-route"></i> Selecciona las Rutas:</label>
                            <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <p style="margin: 0; color: #94a3b8; font-size: 0.9rem;">
                                        <i class="fas fa-info-circle"></i> Selecciona rutas para calcular costos y distancias
                                    </p>
                                    <button type="button" class="btn-filter-small" onclick="cargarRutasRecursividad()" style="background: var(--success-color); border-color: var(--success-color); color: white;">
                                        <i class="fas fa-sync-alt"></i> Recargar
                                    </button>
                                </div>
                                <div class="loading-spinner" id="combined-routes-loading">
                                    <i class="fas fa-spinner fa-spin"></i> Cargando rutas...
                                </div>
                                <div id="combined-routes-container" class="selectable-items-container" style="display: none;"></div>
                        </div>
                        </div>
                        <button class="btn btn-primary" onclick="calcularMetricasCombinadas()">
                            <i class="fas fa-calculator"></i> Calcular
                        </button>
                        <div id="combined-result" class="result-box"></div>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-tachometer-alt"></i> Comparar Rendimiento</h3>
                        <div class="form-group">
                            <label><i class="fas fa-route"></i> Selecciona las Rutas:</label>
                            <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <p style="margin: 0; color: #94a3b8; font-size: 0.9rem;">
                                        <i class="fas fa-info-circle"></i> Selecciona rutas para comparar rendimiento
                                    </p>
                                    <button type="button" class="btn-filter-small" onclick="cargarRutasRecursividad()" style="background: var(--success-color); border-color: var(--success-color); color: white;">
                                        <i class="fas fa-sync-alt"></i> Recargar
                                    </button>
                                </div>
                                <div class="loading-spinner" id="compare-routes-loading">
                                    <i class="fas fa-spinner fa-spin"></i> Cargando rutas...
                                </div>
                                <div id="compare-routes-container" class="selectable-items-container" style="display: none;"></div>
                            </div>
                        </div>
                        <button class="btn btn-success" onclick="compararRendimiento()">
                            <i class="fas fa-balance-scale"></i> Comparar
                        </button>
                        <div id="compare-result" class="result-box"></div>
                    </div>
                </div>
            </div>

            <!-- M贸dulo 2: Divide y Vencer谩s -->
            <div class="module-content" id="module-divide">
                <div class="module-header">
                    <h2><i class="fas fa-code-branch"></i> M贸dulo 2: Divide y Vencer谩s</h2>
                    <p>Ordenamiento y b煤squeda eficiente. MergeSort O(n log n), B煤squeda Binaria O(log n)</p>
                </div>

                <div class="card-grid">
                    <div class="card">
                        <h3><i class="fas fa-sort-amount-down"></i> MergeSort por Demanda</h3>
                        <p class="help-text"><i class="fas fa-info-circle"></i> Ordena centros por nivel de demanda (mayor a menor)</p>
                        <div class="form-group">
                            <label>IDs de centros (separados por comas):</label>
                            <input type="text" id="mergesort-ids" placeholder="DC001, DC002, DC003, DC004, DC005" value="DC001, DC002, DC003, DC004, DC005">
                            <small class="input-hint"> Deja vac铆o para ordenar todos los centros</small>
                        </div>
                        <button class="btn btn-primary" onclick="ordenarMergeSort()">
                            <i class="fas fa-sort"></i> Ordenar
                        </button>
                        <div id="mergesort-result" class="result-box"></div>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-sort"></i> QuickSort por Prioridad</h3>
                        <p class="help-text"><i class="fas fa-info-circle"></i> Ordena centros por nivel de prioridad (1 = m谩xima prioridad)</p>
                        <div class="form-group">
                            <label>IDs de centros (separados por comas):</label>
                            <input type="text" id="quicksort-ids" placeholder="DC001, DC002, DC003, DC004, DC005" value="DC001, DC002, DC003, DC004, DC005">
                            <small class="input-hint"> Deja vac铆o para ordenar todos los centros</small>
                        </div>
                        <button class="btn btn-primary" onclick="ordenarQuickSort()">
                            <i class="fas fa-sort"></i> Ordenar
                        </button>
                        <div id="quicksort-result" class="result-box"></div>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-search"></i> B煤squeda Binaria</h3>
                        <p class="help-text"><i class="fas fa-info-circle"></i> Busca un centro por su nivel de demanda exacto</p>
                        <div class="form-group">
                            <label>IDs de centros (separados por comas):</label>
                            <input type="text" id="binary-ids" placeholder="DC001, DC002, DC003, DC004, DC005" value="DC001, DC002, DC003, DC004, DC005">
                            <small class="input-hint"> Deja vac铆o para buscar en todos los centros</small>
                        </div>
                        <div class="form-group">
                            <label>Demanda objetivo:</label>
                            <input type="number" id="binary-demand" placeholder="70" value="75">
                            <small class="input-hint"> Busca centros con este nivel de demanda exacto</small>
                        </div>
                        <button class="btn btn-primary" onclick="buscarBinaria()">
                            <i class="fas fa-search"></i> Buscar
                        </button>
                        <div id="binary-result" class="result-box"></div>
                    </div>
                </div>
            </div>

            <!-- M贸dulo 3: Greedy -->
            <div class="module-content" id="module-greedy">
                <div class="module-header">
                    <h2><i class="fas fa-coins"></i> M贸dulo 3: Algoritmos Greedy</h2>
                    <p>Asignaci贸n de recursos en tiempo real. Complejidad: O(n)</p>
                </div>

                <div class="card-grid">
                    <div class="card">
                        <h3><i class="fas fa-gas-pump"></i> Distribuir Combustible</h3>
                        <div class="form-group">
                            <label><i class="fas fa-oil-can"></i> Combustible Disponible (litros):</label>
                            <input type="number" id="fuel-amount" placeholder="1500" value="1500" min="0">
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-truck"></i> Selecciona los Camiones:</label>
                            <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <p style="margin: 0; color: #94a3b8; font-size: 0.9rem;">
                                        <i class="fas fa-info-circle"></i> Selecciona los camiones que deseas abastecer de combustible
                                    </p>
                                    <button type="button" class="btn-filter-small" onclick="cargarCamionesGreedy()" style="background: var(--success-color); border-color: var(--success-color); color: white;">
                                        <i class="fas fa-sync-alt"></i> Recargar
                                    </button>
                                </div>
                                
                                <div style="margin-bottom: 0.5rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
                                    <button type="button" class="btn-filter-small active" onclick="filtrarCamionesGreedy('todos')">
                                        Todos (<span id="greedy-count-todos">0</span>)
                                    </button>
                                    <button type="button" class="btn-filter-small" onclick="filtrarCamionesGreedy('available')">
                                        Disponibles (<span id="greedy-count-available">0</span>)
                                    </button>
                                    <button type="button" class="btn-filter-small" onclick="filtrarCamionesGreedy('bajo')">
                                        Bajo Combustible (<span id="greedy-count-bajo">0</span>)
                                    </button>
                                </div>
                                
                                <div class="loading-spinner" id="fuel-trucks-loading">
                                    <i class="fas fa-spinner fa-spin"></i> Cargando camiones...
                                </div>
                                <div id="fuel-trucks-container" class="selectable-trucks-container" style="display: none;"></div>
                                
                                <div id="fuel-selection-summary" class="selection-summary-compact" style="display: none;">
                                    <div><strong><span id="fuel-selected-count">0</span></strong> camiones seleccionados</div>
                                    <div>Necesitan: <strong><span id="fuel-needed-total">0</span>L</strong></div>
                                </div>
                            </div>
                        </div>
                        <div class="button-group">
                            <button class="btn btn-primary" onclick="distribuirCombustiblePersonalizado()" id="btn-fuel-distribuir" disabled>
                            <i class="fas fa-gas-pump"></i> Distribuir
                        </button>
                            <button type="button" class="btn btn-secondary" onclick="seleccionarTodosCamionesGreedy()">
                                <i class="fas fa-check-double"></i> Todos
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="limpiarSeleccionCamionesGreedy()">
                                <i class="fas fa-times"></i> Limpiar
                            </button>
                        </div>
                        <div id="fuel-result" class="result-box"></div>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-dollar-bill-wave"></i> Distribuir Presupuesto</h3>
                        <div class="form-group">
                            <label><i class="fas fa-wallet"></i> Presupuesto total:</label>
                            <input type="number" id="budget-total" placeholder="1000" value="1000" min="0" step="100">
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-plus-circle"></i> Agregar Proyecto:</label>
                            <div class="project-builder">
                                <div class="project-input-group">
                                    <input type="text" id="project-name" placeholder="Nombre del proyecto" class="project-input">
                                    <input type="number" id="project-costo" placeholder="Costo" min="0" step="10" class="project-input-small">
                                    <input type="number" id="project-beneficio" placeholder="Beneficio" min="0" step="10" class="project-input-small">
                                    <button type="button" class="btn-add-project" onclick="agregarProyecto()">
                                        <i class="fas fa-plus"></i> Agregar
                                    </button>
                                </div>
                                <div id="proyectos-agregados" class="proyectos-list"></div>
                            </div>
                        </div>
                        <div class="button-group">
                            <button class="btn btn-primary" onclick="distribuirPresupuesto()">
                                <i class="fas fa-money-bill-wave"></i> Distribuir
                            </button>
                        </div>
                        <div id="budget-result" class="result-box"></div>
                    </div>
                </div>
            </div>

            <!-- M贸dulo 4: Grafos -->
            <div class="module-content" id="module-graphs">
                <div class="module-header">
                    <h2><i class="fas fa-project-diagram"></i> M贸dulo 4: Grafos</h2>
                    <p>Optimizaci贸n de rutas. Kruskal O(E log E), Prim O(E log V), Dijkstra O((V+E) log V)</p>
                </div>

                <div class="card-grid">
                    <div class="card">
                        <h3><i class="fas fa-network-wired"></i> MST - Kruskal</h3>
                        <div class="form-group">
                            <label><i class="fas fa-database"></i> Usar datos de Neo4j:</label>
                            <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                                <p style="margin: 0 0 0.75rem 0; color: #94a3b8; font-size: 0.9rem;">
                                    <i class="fas fa-info-circle"></i> Selecciona los centros y rutas que deseas usar para calcular el MST
                                </p>
                                
                                <div class="form-group" style="margin-bottom: 1rem;">
                                    <label style="font-size: 0.9rem; margin-bottom: 0.5rem;">
                                        <i class="fas fa-warehouse"></i> Centros de Distribuci贸n:
                                    </label>
                                    <div class="loading-spinner" id="kruskal-centers-loading" style="display: none;">
                                        <i class="fas fa-spinner fa-spin"></i>
                                    </div>
                                    <div id="kruskal-centers-container" class="selectable-items-container"></div>
                                </div>
                                
                                <div class="form-group" style="margin-bottom: 1rem;">
                                    <label style="font-size: 0.9rem; margin-bottom: 0.5rem;">
                                        <i class="fas fa-route"></i> Rutas:
                                    </label>
                                    <div class="loading-spinner" id="kruskal-routes-loading" style="display: none;">
                                        <i class="fas fa-spinner fa-spin"></i>
                                    </div>
                                    <div id="kruskal-routes-container" class="selectable-items-container"></div>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="calcularKruskal()">
                            <i class="fas fa-sitemap"></i> Calcular MST
                        </button>
                        <div id="kruskal-result" class="result-box"></div>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-route"></i> Dijkstra - Caminos M谩s Cortos</h3>
                        <div class="form-group">
                            <label><i class="fas fa-database"></i> Usar datos de Neo4j:</label>
                            <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                                <p style="margin: 0 0 0.75rem 0; color: #94a3b8; font-size: 0.9rem;">
                                    <i class="fas fa-info-circle"></i> Selecciona los centros, rutas y el centro de origen para calcular los caminos m谩s cortos
                                </p>
                                
                                <div class="form-group" style="margin-bottom: 1rem;">
                                    <label style="font-size: 0.9rem; margin-bottom: 0.5rem;">
                                        <i class="fas fa-warehouse"></i> Centros de Distribuci贸n:
                                    </label>
                                    <div class="loading-spinner" id="dijkstra-centers-loading" style="display: none;">
                                        <i class="fas fa-spinner fa-spin"></i>
                                    </div>
                                    <div id="dijkstra-centers-container" class="selectable-items-container"></div>
                                </div>
                                
                                <div class="form-group" style="margin-bottom: 1rem;">
                                    <label style="font-size: 0.9rem; margin-bottom: 0.5rem;">
                                        <i class="fas fa-route"></i> Rutas:
                                    </label>
                                    <div class="loading-spinner" id="dijkstra-routes-loading" style="display: none;">
                                        <i class="fas fa-spinner fa-spin"></i>
                                    </div>
                                    <div id="dijkstra-routes-container" class="selectable-items-container"></div>
                                </div>
                                
                                <div class="form-group" style="margin-bottom: 1rem;">
                                    <label style="font-size: 0.9rem; margin-bottom: 0.5rem;">
                                        <i class="fas fa-play-circle"></i> Centro de Origen:
                                    </label>
                                    <select id="dijkstra-source-select" class="form-control" style="width: 100%; padding: 0.5rem; background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 6px; color: var(--text-primary);">
                                        <option value="">Selecciona un centro de origen</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="calcularDijkstra()">
                            <i class="fas fa-route"></i> Calcular
                        </button>
                        <div id="dijkstra-result" class="result-box"></div>
                    </div>
                </div>
            </div>

            <!-- M贸dulo 5: Programaci贸n Din谩mica -->
            <div class="module-content" id="module-dynamic">
                <div class="module-header">
                    <h2><i class="fas fa-chart-line"></i> M贸dulo 5: Programaci贸n Din谩mica</h2>
                    <p>Planificaci贸n de inversiones. Mochila 0/1 O(n  P)</p>
                </div>

                <div class="card-grid">
                    <div class="card">
                        <h3><i class="fas fa-briefcase"></i> Mochila 0/1</h3>
                        <div class="form-group">
                            <label><i class="fas fa-wallet"></i> Presupuesto Disponible:</label>
                            <input type="number" id="knapsack-budget" placeholder="300" value="300" min="0" step="10">
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-plus-circle"></i> Agregar Proyecto de Inversi贸n:</label>
                            <div class="project-builder">
                                <div class="project-input-group">
                                    <input type="text" id="knapsack-project-name" placeholder="Nombre del proyecto" class="project-input">
                                    <input type="number" id="knapsack-project-costo" placeholder="Costo $" min="0" step="10" class="project-input-small">
                                    <input type="number" id="knapsack-project-beneficio" placeholder="Beneficio $" min="0" step="10" class="project-input-small">
                                    <button type="button" class="btn-add-project" onclick="agregarProyectoMochila()">
                                        <i class="fas fa-plus"></i> Agregar
                                    </button>
                                </div>
                                <div id="knapsack-proyectos-agregados" class="proyectos-list"></div>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="resolverMochila()">
                            <i class="fas fa-calculator"></i> Resolver
                        </button>
                        <div id="knapsack-result" class="result-box"></div>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-balance-scale"></i> Comparar con Greedy</h3>
                        <div class="form-group">
                            <label><i class="fas fa-wallet"></i> Presupuesto:</label>
                            <input type="number" id="compare-knapsack-budget" placeholder="300" value="300" min="0" step="10">
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-info-circle"></i> Usa los mismos proyectos del formulario anterior</label>
                            <div class="info-box">
                                <i class="fas fa-lightbulb"></i>
                                Los proyectos se tomar谩n autom谩ticamente del formulario "Mochila 0/1"
                            </div>
                        </div>
                        <div class="button-group">
                            <button class="btn btn-success" onclick="compararMochilaGreedy()">
                                <i class="fas fa-balance-scale"></i> Comparar
                            </button>
                        </div>
                        <div id="compare-knapsack-result" class="result-box"></div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Panel Lateral Derecho - Datos Neo4j -->
        <aside class="neo4j-sidebar" id="neo4j-sidebar">
            <div class="sidebar-header">
                <h3><i class="fas fa-database"></i> Datos Neo4j</h3>
                <button class="sidebar-toggle" onclick="toggleSidebar()" title="Colapsar/Expandir">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="sidebar-content" id="neo4j-content">
                <div class="sidebar-loading">
                    <div class="spinner-small"></div>
                    <p>Cargando datos...</p>
                </div>
            </div>
        </aside>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p>TransRoute S.A. - Sistema de Log铆stica Inteligente</p>
            <p>Implementaci贸n completa de 5 m贸dulos algor铆tmicos</p>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="spinner"></div>
        <p>Procesando...</p>
    </div>

    <!-- Result Modal -->
    <div id="result-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">
                    <i class="fas fa-check-circle"></i> Resultado
                </h2>
                <button class="modal-close" onclick="cerrarModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Contenido din谩mico -->
            </div>
        </div>
    </div>

    <script src="visualizer.js"></script>
    <script src="app.js"></script>
</body>
</html>

